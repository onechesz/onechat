{% load static %}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>{% block title %}{% endblock title %}</title>
        <link rel="stylesheet" href="{% static 'css/base.css' %}">
        {% block css_additional %}{% endblock css_additional %}
    </head>

    {% block content %}
    {% endblock content %}
    <script>
        const btnTheme = document.getElementById('btn-theme');
        const headElem = document.getElementsByTagName('head')[0];

        const darkThemeLink = document.createElement('link');
        darkThemeLink.href = "{% static 'css/dark_theme.css' %}";
        darkThemeLink.rel = 'stylesheet'

        let theme = localStorage.getItem('theme');

        if (theme === 'dark') {
            headElem.appendChild(darkThemeLink);
            btnTheme.innerText = 'Светлее';
        } 

        btnTheme.addEventListener('click', () => {
            if (theme === 'light' || theme === null) {
                localStorage.setItem('theme', 'dark');
                headElem.appendChild(darkThemeLink);
                btnTheme.innerText = 'Светлее';
                theme = localStorage.getItem('theme');
            }
            else if (theme === 'dark') {
                localStorage.setItem('theme', 'light');
                headElem.removeChild(darkThemeLink);
                btnTheme.innerText = 'Темнее';
                theme = localStorage.getItem('theme');
            }
        })
    </script>
    {% block scripts %}
    {% endblock scripts %}
</html>